<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.12&appId=1818422994855649&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<div class="container">
  <div class="col-xs-12 col-sm-8 col-sm-offset-2">

    <div class="col-xs-4 user-avatar">
      <%= image_tag @user.avatar, class: "img-circle avatar"%>  
    </div>

    <div class="col-xs-8 user-data">
      <div class="col-xs-12 ">
        <h2 class="text-dark"><%= @user.name %> </h2>
      </div>
      <div class="col-xs-3 text-center pd0">
        <h3 ><%= @user_rank %> </h3>
        <h6>排名</h6>
      </div>

      <div class="col-xs-3 text-center pd0 ">
        <h3><%= @user.getUserLevel() %></h3> 
        <h6 class="text-muted">等級</h6>
      </div>
      <div class="col-xs-3 text-center pd0 ">
        <h3><%= @user.badges.count%></h3>
        <h6 class="text-muted">徽章</h6>
      </div>

      <div class="col-xs-3 text-center pd0 ">
        <h3><%= @user.experience %></h3>
        <h6 class="text-muted">點數</h6>
      </div>
    </div>   
<div class="clearfix"></div>  

    <div class="col-xs-4  text-center">
     <% if @user==current_user %>
      <div class=" btn btn-sm btn-main-1-outline">
        <%= link_to " 更新資料 ", edit_user_registration_path %>
      </div>
     <% end %>
    </div>

    <div class="col-xs-4  text-center">
      <div class=" btn btn-sm btn-main-1-outline" id="btn-to-leaderboard">
        <%= link_to " 排行榜 ", leaderboards_users_path %>
      </div>
    </div> 

    <div class="col-xs-4 text-center" id="share-follow">
      <% if @user == current_user %>
        <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="<%'https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">FB分享</a></div>  
        <!-- <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true">
          <a target="_blank" href="<%'https://m.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">FB分享</a></div>  -->  
      <% else %>
        <div class="text-center" id="follow-icon-show">
          <%= render partial: "shared/follow", locals: {user: @user} %>
        </div>
      <% end %> 
    </div>

  
    <div class="clearfix"></div>
    <hr class="hr-style">
    <div class="text-center text-dark">我的徽章</div>

    <div class="use-badge-data">
      <% @user.badges.each do |badge| %>
        <div class="user-badge thumbnail col-xs-4 col-sm-3 col-md-2">
          <%= image_tag (badge.custom_fields[:image]) %>
          <div class="caption text-center">
            <p><%= badge.description %></p>
          </div>
        </div>
      <%end%>
    </div>
  </div>
</div>
