<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.12&appId=1818422994855649&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<div class="container">
  <div class="col-xs-12 col-sm-8 col-sm-offset-2">

    <div class="col-xs-4" style="padding: 12px;">
      <%= image_tag @user.avatar, class: "img-circle avatar"%>  
    </div>

    <div class="col-xs-8 user-data" style= "padding: 15px 5px 0px 0px;">
      <div class="col-xs-12">
        <h2 style="margin-bottom: 5px; margin-left: -3px;"><%= @user.name %> </h2>
      </div>
      <div class="col-xs-3 text-center" style="padding: 0px;">
        <h3 style="color: #0069d2"><%= @user_rank %> </h3>
        <h6>排名</h6>
      </div>

      <div class="col-xs-3 text-center" style="padding: 0px;">
        <h3><%= @user.getUserLevel() %></h3> 
        <h6 class="text-muted">等級</h6>
      </div>
      <div class="col-xs-3 text-center" style="padding: 0px;">
        <h3><%= @user.badges.count%></h3>
        <h6 class="text-muted">徽章</h6>
      </div>

      <div class="col-xs-3 text-center" style="padding: 0px;">
        <h3><%= @user.experience %></h3>
        <h6 class="text-muted">點數</h6>
      </div>
    </div>   
<div class="clearfix"></div>  

    <div class="col-xs-4  text-center" style="">
     <% if @user==current_user %>
      <div class=" btn btn-sm btn-main-1-outline">
        <%= link_to " 更新資料 ", edit_user_registration_path %>
      </div>
     <% end %>
    </div>

    <div class="col-xs-4  text-center">
      <div class=" btn btn-sm btn-main-1-outline" style="padding: 5px 15px;">
        <%= link_to " 排行榜 ", leaderboards_users_path %>
      </div>

      <%= image_tag @user.avatar, class: "img-circle avatar"%>  
      <div class="col-xs-12  text-center" style="margin: 5px -8px;">
         <% if @user==current_user %>
          <div class=" btn btn-sm btn-main-outline">
            <%= link_to " 更新資料 ", edit_user_registration_path %>
          </div>
         <% else %>
          <div class="" style="padding: 5px 0 0 3px;">
            <%= render partial: "shared/follow", locals: {user: @user} %>
          </div>
         <% end %>
      </div>
      <div class="col-xs-12 text-center" style="margin: 0 auto">
        <% if @user == current_user %>
          <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="<%'https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">FB分享</a></div>  
          <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true">
          <a target="_blank" href="<%'https://m.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">FB分享</a></div> 
        <% end %> 
      </div>
    </div> 

    <div class="col-xs-4 text-center" style="margin: 5px auto; padding-left: 10px;">
      <% if @user == current_user %>
        <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="<%'https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">FB分享</a></div>  
      <% else %>
        <div class="text-center" style="margin: 0px 0px 0px 50px;">
          <%= render partial: "shared/follow", locals: {user: @user} %>
        </div>
      <% end %> 
    </div>

  
    <div class="clearfix"></div>
    <hr style="margin: 10px 0;">
    <div class="text-center">我的徽章</div>

    <div class="use-badge-data">
      <% @user.badges.each do |badge| %>
        <div class="user-badge thumbnail col-xs-4 col-sm-3 col-md-2">
          <%= image_tag (badge.custom_fields[:image]) %>
          <div class="caption text-center">
            <p><%= badge.description %></p>
          </div>
        </div>
      <%end%>
    </div>
  </div>
</div>
