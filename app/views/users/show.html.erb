<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.12&appId=1818422994855649&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<div class="container">
  <div class=" border white col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3", style="min-height: 605px;">
    <div class="user-data col-xs-12">
      <div class=" btn btn-default pull-right">
        <%= link_to "排行榜", f_leaderboards_users_path%>
      </div>

      <div class="clearfix"></div>

      <div class=" col-xs-5">
        <%= image_tag @user.avatar, class: "img-circle avatar"%>        
      </div><!-- end of avatar -->

      <div class="col-xs-7">
        <div class="col-xs-12 user-data">
          <h4><%= @user.name %> </h4>
        </div>

        <div  class="col-xs-2 user-data">
          <div class="user-icon"><%= image_tag(("navbar_icons/B.svg")) %> </div>
        </div>
        <div  class="col-xs-8 col-xs-offset-1">
          <div class="user-icon-text">徽章    <%= @user.badges.count%> </div>
        </div>
        <div class="clearfix"></div>
        <div  class="col-xs-2 user-data">
          <div class="user-icon"> <%= image_tag(("navbar_icons/b_G.svg")) %></div> 
        </div>
        <div  class="col-xs-8 col-xs-offset-1">
          <div class="user-icon-text">點數    <%= @user.points %></div>
        </div>       
      </div><!-- end of user record -->
      <div class="clearfix"></div>
      <div class="col-xs-8">
        <% if @user == current_user %>      
          <%= form_for @user do |f| %>
            <div class="col-xs-7 pull-left">
              <%= f.file_field :avatar, class: "btn form-control-file " %>
            </div>
            <div class="col-xs-2">
              <input class="form-control-file  form-control-sm" type="submit" value="update">
            </div>
          <%end%>
        <% else %>
          <div class="col-xs-8">
            <%= render partial: "shared/follow", locals: {user: @user}%>
          </div>
        <%end%>  
      </div>
      <div class="col-xs-4 ">
        <div class="fb-share-button" data-href="<% 'https://gogaming-deployment.herokuapp.com/users/'+'@user.id'%>" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="<%'https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgogaming-deployment.herokuapp.com%2Fusers%2F'+'@user.id'+'&amp;src=sdkpreparse'%>" class="fb-xfbml-parse-ignore">分享</a></div>        
      </div>
    </div>
    <div class="clearfix"></div>

<div class="col-xs-12"><hr></div>
    
    <div class="use-badge-data col-xs-12">
      <% @user.badges.each do |badge| %>
        <div class="user-badge thumbnail col-xs-4 col-sm-4 col-md-3">
          <%= image_tag (badge.custom_fields[:image]) %>
          <div class="caption text-center">
            <p><%= badge.description %></p>
          </div>
        </div>
      <%end%>
    </div>

  </div>
</div>









